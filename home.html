<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Financial Calculator</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
    <style>
        .error-message {
            color: #fff;
            background-color: #dc3545;
            padding: 10px;
            border-radius: 5px;
            margin-top: 10px;
        }
    </style>
</head>

<body>
    <div class="container py-5">
        <h2 class="text-center mb-4">Financial Performance Calculator</h2>

        <form id="financeForm" class="needs-validation" novalidate>
            <div class="row g-3">
                <div class="col-md-4">
                    <label class="form-label">Profit (billion)</label>
                    <input type="number" class="form-control" id="profit" value="27.5" required>
                    <div class="invalid-feedback">Please enter a valid profit.</div>
                </div>
                <div class="col-md-4">
                    <label class="form-label">Average Number of Shares (billion)</label>
                    <input type="number" class="form-control" id="shares" value="1.6" required>
                    <div class="invalid-feedback">Shares must be greater than 0.</div>
                </div>
                <div class="col-md-4">
                    <label class="form-label">Price per Share</label>
                    <input type="number" class="form-control" id="price" value="145.00" required>
                    <div class="invalid-feedback">Enter a valid share price.</div>
                </div>
                <div class="col-md-4">
                    <label class="form-label">Total Assets (billion)</label>
                    <input type="number" class="form-control" id="assets" value="194" required>
                    <div class="invalid-feedback">Enter a valid asset amount.</div>
                </div>
                <div class="col-md-4">
                    <label class="form-label">Total Liabilities (billion)</label>
                    <input type="number" class="form-control" id="liabilities" value="100" required>
                    <div class="invalid-feedback">Enter a valid liability amount.</div>
                </div>
                <div class="col-md-4">
                    <label class="form-label">% Expected Growth</label>
                    <input type="number" class="form-control" id="growth" value="4" required>
                    <div class="invalid-feedback">Growth must be greater than 0.</div>
                </div>
            </div>

            <div class="mt-4 d-flex gap-3">
                <button type="submit" class="btn btn-primary">Calculate</button>
                <button type="button" class="btn btn-secondary" onclick="clearForm()">Clear</button>
            </div>
        </form>

        <div id="output" class="mt-4"></div>
    </div>

    <script>
        const form = document.getElementById('financeForm');
        const output = document.getElementById('output');

        form.addEventListener('submit', function (event) {
            event.preventDefault();
            if (!form.checkValidity()) {
                event.stopPropagation();
                form.classList.add('was-validated');
                return;
            }

            const profit = parseFloat(document.getElementById('profit').value);
            const shares = parseFloat(document.getElementById('shares').value);
            const price = parseFloat(document.getElementById('price').value);
            const assets = parseFloat(document.getElementById('assets').value);
            const liabilities = parseFloat(document.getElementById('liabilities').value);
            const growth = parseFloat(document.getElementById('growth').value);

            if (shares === 0 || (assets - liabilities) === 0 || growth === 0) {
                output.innerHTML = `<div class="error-message">Error: Cannot divide by zero. Check shares, assets-liabilities, or growth.</div>`;
                return;
            }

            const eps = profit / shares;
            const pb = price / (assets - liabilities);
            const pe = price / eps;
            const peg = pe / growth;

            output.innerHTML = `
      <div class="card">
        <div class="card-body">
          <h5 class="card-title">Calculated Metrics</h5>
          <ul class="list-group list-group-flush">
            <li class="list-group-item">
              <strong>Earnings per Share (EPS):</strong> ${eps.toFixed(2)}
              ${getBadge(eps, 'eps')}
            </li>
            <li class="list-group-item">
              <strong>Price to Book (P/B) Ratio:</strong> ${pb.toFixed(2)}
              ${getBadge(pb, 'pb')}
            </li>
            <li class="list-group-item">
              <strong>Price to Earnings (P/E) Ratio:</strong> ${pe.toFixed(2)}
              ${getBadge(pe, 'pe')}
            </li>
            <li class="list-group-item">
              <strong>PEG Ratio:</strong> ${peg.toFixed(2)}
              ${getBadge(peg, 'peg')}
            </li>
          </ul>
        </div>
      </div>
    `;
        });

        function clearForm() {
            form.reset();
            form.classList.remove('was-validated');
            output.innerHTML = '';
        }

        function getBadge(value, type) {
            let label = '', color = '';

            switch (type) {
                case 'eps':
                    if (value >= 10) { label = 'Good'; color = 'success'; }
                    else if (value >= 5) { label = 'Average'; color = 'warning'; }
                    else { label = 'Poor'; color = 'danger'; }
                    break;
                case 'pb':
                    if (value < 3) { label = 'Good'; color = 'success'; }
                    else if (value <= 5) { label = 'Average'; color = 'warning'; }
                    else { label = 'Poor'; color = 'danger'; }
                    break;
                case 'pe':
                    if (value >= 10 && value <= 20) { label = 'Good'; color = 'success'; }
                    else if ((value > 20 && value <= 30) || (value >= 5 && value < 10)) { label = 'Average'; color = 'warning'; }
                    else { label = 'Poor'; color = 'danger'; }
                    break;
                case 'peg':
                    if (value <= 1) { label = 'Good'; color = 'success'; }
                    else if (value <= 2) { label = 'Average'; color = 'warning'; }
                    else { label = 'Poor'; color = 'danger'; }
                    break;
            }

            return `<span class="badge bg-${color} ms-2">${label}</span>`;
        }
    </script>
</body>

</html>